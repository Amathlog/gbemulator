from pathlib import Path
import sys
import os
import numpy as np

root = Path(os.path.abspath(__file__)).parent
filename = "generated.gb"

file = root / filename

nintendo_logo = np.array([0xCE, 0xED, 0x66, 0x66, 0xCC, 0x0D, 0x00, 0x0B, 0x03, 0x73, 0x00, 0x83, 0x00, 0x0C, 0x00, 0x0D,
0x00, 0x08, 0x11, 0x1F, 0x88, 0x89, 0x00, 0x0E, 0xDC, 0xCC, 0x6E, 0xE6, 0xDD, 0xDD, 0xD9, 0x99,
0xBB, 0xBB, 0x67, 0x63, 0x6E, 0x0E, 0xEC, 0xCC, 0xDD, 0xDC, 0x99, 0x9F, 0xBB, 0xB9, 0x33, 0x3E], dtype=np.uint8)

romSizeCode = 0 
ramSizeCode = 0

title = np.zeros(16, dtype=np.uint8)
title[0] = ord('T')
title[1] = ord('E')
title[2] = ord('S')
title[3] = ord('T')

data = np.zeros((1 << (romSizeCode + 1)) * 0x4000, dtype=np.uint8)

data[0x0104:0x0133+1] = nintendo_logo
data[0x134:0x143+1] = title

# Entry point
# NOP
data[0x0100] = 0x00
# JP 0x0150
data[0x0101] = 0xC3
data[0x0102] = 0x50
data[0x0103] = 0x01

# Then write program here
# LD A, 0x80
data[0x0150:0x0152] = [0x3E, 0x80]
# ADD A, 0x0
data[0x0152:0x0154] = [0xC6, 0x01]
# LD HL, 0xC000
data[0x0154:0x0157] = [0x21, 0x00, 0xC0]
# LD (HL), A
data[0x0157] = 0x77

with file.open("wb") as f:
    f.write(data)
